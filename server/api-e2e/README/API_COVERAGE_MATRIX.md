# API 覆盖矩阵

> 此文件由 `:api-e2e:generateCoverageMatrix` 自动生成，请勿手改。

- 生成命令：`cd server && ./gradlew :api-e2e:generateCoverageMatrix`
- 校验命令：`cd server && ./gradlew :api-e2e:test`
- 统计口径：按 `HTTP 方法 + Path + headers 条件` 计数（媒体 Range/非Range 分开）。
- 当前接口总数：`44`

| # | 覆盖级别 | HTTP | Path | 条件 | 需登录 | Controller#method | 用例引用 | 备注 |
|---|---|---|---|---|---|---|---|---|
| 1 | FULL | GET | /api/accounts | - | Y | AccountController#list | com.unirhy.e2e.AccountPlaylistContentE2eTest#accounts should support create list me update delete with permission boundary | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
| 2 | FULL | POST | /api/accounts | - | Y | AccountController#create | com.unirhy.e2e.AccountPlaylistContentE2eTest#accounts should support create list me update delete with permission boundary | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
| 3 | FULL | GET | /api/accounts/me | - | Y | AccountController#me | com.unirhy.e2e.AccountPlaylistContentE2eTest#accounts should support create list me update delete with permission boundary | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
| 4 | FULL | DELETE | /api/accounts/{id} | - | Y | AccountController#delete | com.unirhy.e2e.AccountPlaylistContentE2eTest#accounts should support create list me update delete with permission boundary | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
| 5 | FULL | PUT | /api/accounts/{id} | - | Y | AccountController#update | com.unirhy.e2e.AccountPlaylistContentE2eTest#accounts should support create list me update delete with permission boundary | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; permission: non-admin cannot update admin |
| 6 | FULL | GET | /api/albums | - | Y | AlbumController#listAlbums | com.unirhy.e2e.TaskContentReadE2eTest#works and albums should support read random and delete flow | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access |
| 7 | FULL | GET | /api/albums/search | - | Y | AlbumController#getAlbumByName | com.unirhy.e2e.AccountPlaylistContentE2eTest#content endpoints should support search update recording update and merge flow | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; validation: unknown keyword returns empty array |
| 8 | FULL | GET | /api/albums/{id} | - | Y | AlbumController#getAlbum | com.unirhy.e2e.TaskContentReadE2eTest#works and albums should support read random and delete flow | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access |
| 9 | FULL | GET | /api/media/{id} | !Range | Y | MediaFileController#getMedia | com.unirhy.e2e.TaskContentReadE2eTest#media endpoint should support full range head and error branches | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access; error: unknown id returns 404 |
| 10 | FULL | GET | /api/media/{id} | Range | Y | MediaFileController#getMediaWithRange | com.unirhy.e2e.TaskContentReadE2eTest#media endpoint should support full range head and error branches | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access; error: invalid range returns 416 |
| 11 | FULL | HEAD | /api/media/{id} | !Range | Y | MediaFileController#headMedia | com.unirhy.e2e.TaskContentReadE2eTest#media endpoint should support full range head and error branches | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access |
| 12 | FULL | GET | /api/playlists | - | Y | PlaylistController#listPlaylists | com.unirhy.e2e.AccountPlaylistContentE2eTest#playlists should support owner scoped crud and recording association | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
| 13 | FULL | POST | /api/playlists | - | Y | PlaylistController#createPlaylist | com.unirhy.e2e.AccountPlaylistContentE2eTest#playlists should support owner scoped crud and recording association | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
| 14 | FULL | DELETE | /api/playlists/{id} | - | Y | PlaylistController#deletePlaylist | com.unirhy.e2e.AccountPlaylistContentE2eTest#playlists should support owner scoped crud and recording association | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; ownership: non-owner returns 404 |
| 15 | FULL | GET | /api/playlists/{id} | - | Y | PlaylistController#getPlaylist | com.unirhy.e2e.AccountPlaylistContentE2eTest#playlists should support owner scoped crud and recording association | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; ownership: non-owner returns 404 |
| 16 | FULL | PUT | /api/playlists/{id} | - | Y | PlaylistController#updatePlaylist | com.unirhy.e2e.AccountPlaylistContentE2eTest#playlists should support owner scoped crud and recording association | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; ownership: non-owner returns 404 |
| 17 | FULL | DELETE | /api/playlists/{id}/recordings/{recordingId} | - | Y | PlaylistController#removeRecordingFromPlaylist | com.unirhy.e2e.AccountPlaylistContentE2eTest#playlists should support owner scoped crud and recording association | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; idempotent remove; ownership: non-owner returns 404 |
| 18 | FULL | PUT | /api/playlists/{id}/recordings/{recordingId} | - | Y | PlaylistController#addRecordingToPlaylist | com.unirhy.e2e.AccountPlaylistContentE2eTest#playlists should support owner scoped crud and recording association | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; idempotent add; ownership: non-owner returns 404 |
| 19 | FULL | PUT | /api/recordings/{id} | - | Y | RecordingController#updateRecording | com.unirhy.e2e.AccountPlaylistContentE2eTest#content endpoints should support search update recording update and merge flow | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
| 20 | FULL | GET | /api/storage/fs | - | Y | FileSystemStorageController#list | com.unirhy.e2e.StorageConfigE2eTest#file system storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 21 | FULL | POST | /api/storage/fs | - | Y | FileSystemStorageController#create | com.unirhy.e2e.StorageConfigE2eTest#file system storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 22 | FULL | DELETE | /api/storage/fs/{id} | - | Y | FileSystemStorageController#delete | com.unirhy.e2e.StorageConfigE2eTest#file system storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access; linkage: com.unirhy.e2e.StorageConfigE2eTest#system config should enforce storage linkage constraints |
| 23 | FULL | GET | /api/storage/fs/{id} | - | Y | FileSystemStorageController#get | com.unirhy.e2e.StorageConfigE2eTest#file system storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 24 | FULL | PUT | /api/storage/fs/{id} | - | Y | FileSystemStorageController#update | com.unirhy.e2e.StorageConfigE2eTest#file system storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 25 | FULL | GET | /api/storage/oss | - | Y | OssStorageController#list | com.unirhy.e2e.StorageConfigE2eTest#oss storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 26 | FULL | POST | /api/storage/oss | - | Y | OssStorageController#create | com.unirhy.e2e.StorageConfigE2eTest#oss storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 27 | FULL | DELETE | /api/storage/oss/{id} | - | Y | OssStorageController#delete | com.unirhy.e2e.StorageConfigE2eTest#oss storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 28 | FULL | GET | /api/storage/oss/{id} | - | Y | OssStorageController#get | com.unirhy.e2e.StorageConfigE2eTest#oss storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 29 | FULL | PUT | /api/storage/oss/{id} | - | Y | OssStorageController#update | com.unirhy.e2e.StorageConfigE2eTest#oss storage should support create get update list delete flow | auth: com.unirhy.e2e.StorageConfigE2eTest#all storage endpoints should reject unauthenticated access |
| 30 | FULL | GET | /api/system/config | - | Y | SystemConfigController#get | com.unirhy.e2e.SystemAuthE2eTest#initialize login get update logout should form closed session flow | - |
| 31 | FULL | POST | /api/system/config | - | N | SystemConfigController#create | com.unirhy.e2e.SystemAuthE2eTest#initialize login get update logout should form closed session flow | - |
| 32 | FULL | PUT | /api/system/config | - | Y | SystemConfigController#update | com.unirhy.e2e.SystemAuthE2eTest#initialize login get update logout should form closed session flow | - |
| 33 | FULL | GET | /api/system/config/status | - | N | SystemConfigController#isInitialized | com.unirhy.e2e.SystemAuthE2eTest#status and protected endpoints require authentication | - |
| 34 | FULL | GET | /api/task/running | - | Y | TaskController#listRunningTasks | com.unirhy.e2e.TaskContentReadE2eTest#scan task should expose running lifecycle and reject duplicate submission | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access |
| 35 | FULL | POST | /api/task/scan | - | Y | TaskController#executeScanTask | com.unirhy.e2e.TaskContentReadE2eTest#scan task should expose running lifecycle and reject duplicate submission | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access; conflict: duplicate submission returns 409 when running state is observable |
| 36 | FULL | POST | /api/tokens | - | N | TokenController#login | com.unirhy.e2e.SystemAuthE2eTest#duplicate init and wrong login return stable business errors | - |
| 37 | FULL | DELETE | /api/tokens/current | - | Y | TokenController#logout | com.unirhy.e2e.SystemAuthE2eTest#initialize login get update logout should form closed session flow | - |
| 38 | FULL | GET | /api/works | - | Y | WorkController#listWork | com.unirhy.e2e.TaskContentReadE2eTest#works and albums should support read random and delete flow | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access |
| 39 | FULL | POST | /api/works/merge | - | Y | WorkController#mergeWork | com.unirhy.e2e.AccountPlaylistContentE2eTest#content endpoints should support search update recording update and merge flow | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; merge: source work removed and recordings moved to target |
| 40 | FULL | GET | /api/works/random | - | Y | WorkController#randomWork | com.unirhy.e2e.TaskContentReadE2eTest#works and albums should support read random and delete flow | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access; validation: length<=0 returns 400 |
| 41 | FULL | GET | /api/works/search | - | Y | WorkController#getWorkByName | com.unirhy.e2e.AccountPlaylistContentE2eTest#content endpoints should support search update recording update and merge flow | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access; validation: unknown keyword returns empty array |
| 42 | FULL | DELETE | /api/works/{id} | - | Y | WorkController#deleteWork | com.unirhy.e2e.TaskContentReadE2eTest#works and albums should support read random and delete flow | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access |
| 43 | FULL | GET | /api/works/{id} | - | Y | WorkController#getWorkById | com.unirhy.e2e.TaskContentReadE2eTest#works and albums should support read random and delete flow | auth: com.unirhy.e2e.TaskContentReadE2eTest#task and content endpoints should reject unauthenticated access |
| 44 | FULL | PUT | /api/works/{id} | - | Y | WorkController#updateWork | com.unirhy.e2e.AccountPlaylistContentE2eTest#content endpoints should support search update recording update and merge flow | auth: com.unirhy.e2e.AccountPlaylistContentE2eTest#auth gate for account playlist and content mutation endpoints should reject unauthenticated access |
